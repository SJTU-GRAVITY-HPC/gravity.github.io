<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Gravity Documentation</title>
  <meta name="viewport"
    content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta name="keywords" content="sjtu,doa,astronomy,hpc,cluster,jupyter,documentation">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <script>
    /**
     * copy from Github repo: https://github.com/kubetail-org/loadjs
     * Global dependencies.
     * @global {Object} document - DOM
     */

    var devnull = function () { },
      bundleIdCache = {},
      bundleResultCache = {},
      bundleCallbackQueue = {};


    /**
     * Subscribe to bundle load event.
     * @param {string[]} bundleIds - Bundle ids
     * @param {Function} callbackFn - The callback function
     */
    function subscribe(bundleIds, callbackFn) {
      // listify
      bundleIds = bundleIds.push ? bundleIds : [bundleIds];

      var depsNotFound = [],
        i = bundleIds.length,
        numWaiting = i,
        fn,
        bundleId,
        r,
        q;

      // define callback function
      fn = function (bundleId, pathsNotFound) {
        if (pathsNotFound.length) depsNotFound.push(bundleId);

        numWaiting--;
        if (!numWaiting) callbackFn(depsNotFound);
      };

      // register callback
      while (i--) {
        bundleId = bundleIds[i];

        // execute callback if in result cache
        r = bundleResultCache[bundleId];
        if (r) {
          fn(bundleId, r);
          continue;
        }

        // add to callback queue
        q = bundleCallbackQueue[bundleId] = bundleCallbackQueue[bundleId] || [];
        q.push(fn);
      }
    }


    /**
     * Publish bundle load event.
     * @param {string} bundleId - Bundle id
     * @param {string[]} pathsNotFound - List of files not found
     */
    function publish(bundleId, pathsNotFound) {
      // exit if id isn't defined
      if (!bundleId) return;

      var q = bundleCallbackQueue[bundleId];

      // cache result
      bundleResultCache[bundleId] = pathsNotFound;

      // exit if queue is empty
      if (!q) return;

      // empty callback queue
      while (q.length) {
        q[0](bundleId, pathsNotFound);
        q.splice(0, 1);
      }
    }


    /**
     * Execute callbacks.
     * @param {Object or Function} args - The callback args
     * @param {string[]} depsNotFound - List of dependencies not found
     */
    function executeCallbacks(args, depsNotFound) {
      // accept function as argument
      if (args.call) args = { success: args };

      // success and error callbacks
      if (depsNotFound.length) (args.error || devnull)(depsNotFound);
      else (args.success || devnull)(args);
    }


    /**
     * Load individual file.
     * @param {string} path - The file path
     * @param {Function} callbackFn - The callback function
     */
    function loadFile(path, callbackFn, args, numTries) {
      var doc = document,
        async = args.async,
        maxTries = (args.numRetries || 0) + 1,
        beforeCallbackFn = args.before || devnull,
        pathname = path.replace(/[\?|#].*$/, ''),
        pathStripped = path.replace(/^(css|img|module|nomodule)!/, ''),
        isLegacyIECss,
        hasModuleSupport,
        e;

      numTries = numTries || 0;

      if (/(^css!|\.css$)/.test(pathname)) {
        // css
        e = doc.createElement('link');
        e.rel = 'stylesheet';
        e.href = pathStripped;

        // tag IE9+
        isLegacyIECss = 'hideFocus' in e;

        // use preload in IE Edge (to detect load errors)
        if (isLegacyIECss && e.relList) {
          isLegacyIECss = 0;
          e.rel = 'preload';
          e.as = 'style';
        }
      } else if (/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(pathname)) {
        // image
        e = doc.createElement('img');
        e.src = pathStripped;
      } else {
        // javascript
        e = doc.createElement('script');
        e.src = pathStripped;
        e.async = async === undefined ? true : async;

        // handle es modules
        // modern browsers:
        //   module: add to dom with type="module"
        //   nomodule: call success() callback without adding to dom
        // legacy browsers:
        //   module: call success() callback without adding to dom
        //   nomodule: add to dom with default type ("text/javascript")
        hasModuleSupport = 'noModule' in e;
        if (/^module!/.test(pathname)) {
          if (!hasModuleSupport) return callbackFn(path, 'l');
          e.type = "module";
        } else if (/^nomodule!/.test(pathname) && hasModuleSupport) return callbackFn(path, 'l');
      }

      e.onload = e.onerror = e.onbeforeload = function (ev) {
        var result = ev.type[0];

        // treat empty stylesheets as failures to get around lack of onerror
        // support in IE9-11
        if (isLegacyIECss) {
          try {
            if (!e.sheet.cssText.length) result = 'e';
          } catch (x) {
            // sheets objects created from load errors don't allow access to
            // `cssText` (unless error is Code:18 SecurityError)
            if (x.code != 18) result = 'e';
          }
        }

        // handle retries in case of load failure
        if (result == 'e') {
          // increment counter
          numTries += 1;

          // exit function and try again
          if (numTries < maxTries) {
            return loadFile(path, callbackFn, args, numTries);
          }
        } else if (e.rel == 'preload' && e.as == 'style') {
          // activate preloaded stylesheets
          return e.rel = 'stylesheet'; // jshint ignore:line
        }

        // execute callback
        callbackFn(path, result, ev.defaultPrevented);
      };

      // add to document (unless callback returns `false`)
      if (beforeCallbackFn(path, e) !== false) doc.head.appendChild(e);
    }


    /**
     * Load multiple files.
     * @param {string[]} paths - The file paths
     * @param {Function} callbackFn - The callback function
     */
    function loadFiles(paths, callbackFn, args) {
      // listify paths
      paths = paths.push ? paths : [paths];

      var numWaiting = paths.length,
        x = numWaiting,
        pathsNotFound = [],
        fn,
        i;

      // define callback function
      fn = function (path, result, defaultPrevented) {
        // handle error
        if (result == 'e') pathsNotFound.push(path);

        // handle beforeload event. If defaultPrevented then that means the load
        // will be blocked (ex. Ghostery/ABP on Safari)
        if (result == 'b') {
          if (defaultPrevented) pathsNotFound.push(path);
          else return;
        }

        numWaiting--;
        if (!numWaiting) callbackFn(pathsNotFound);
      };

      // load scripts
      for (i = 0; i < x; i++) loadFile(paths[i], fn, args);
    }


    /**
     * Initiate script load and register bundle.
     * @param {(string|string[])} paths - The file paths
     * @param {(string|Function|Object)} [arg1] - The (1) bundleId or (2) success
     *   callback or (3) object literal with success/error arguments, numRetries,
     *   etc.
     * @param {(Function|Object)} [arg2] - The (1) success callback or (2) object
     *   literal with success/error arguments, numRetries, etc.
     */
    function loadjs(paths, arg1, arg2) {
      var bundleId,
        args;

      // bundleId (if string)
      if (arg1 && arg1.trim) bundleId = arg1;

      // args (default is {})
      args = (bundleId ? arg2 : arg1) || {};

      // throw error if bundle is already defined
      if (bundleId) {
        if (bundleId in bundleIdCache) {
          throw "LoadJS";
        } else {
          bundleIdCache[bundleId] = true;
        }
      }

      function loadFn(resolve, reject) {
        loadFiles(paths, function (pathsNotFound) {
          // execute callbacks
          executeCallbacks(args, pathsNotFound);

          // resolve Promise
          if (resolve) {
            executeCallbacks({ success: resolve, error: reject }, pathsNotFound);
          }

          // publish bundle load event
          publish(bundleId, pathsNotFound);
        }, args);
      }

      if (args.returnPromise) return new Promise(loadFn);
      else loadFn();
    }


    /**
     * Execute callbacks when dependencies have been satisfied.
     * @param {(string|string[])} deps - List of bundle ids
     * @param {Object} args - success/error arguments
     */
    loadjs.ready = function ready(deps, args) {
      // subscribe to bundle load event
      subscribe(deps, function (depsNotFound) {
        // execute callbacks
        executeCallbacks(args, depsNotFound);
      });

      return loadjs;
    };


    /**
     * Manually satisfy bundle dependencies.
     * @param {string} bundleId - The bundle id
     */
    loadjs.done = function done(bundleId) {
      publish(bundleId, []);
    };


    /**
     * Reset loadjs dependencies statuses
     */
    loadjs.reset = function reset() {
      bundleIdCache = {};
      bundleResultCache = {};
      bundleCallbackQueue = {};
    };


    /**
     * Determine if bundle has already been defined
     * @param String} bundleId - The bundle id
     */
    loadjs.isDefined = function isDefined(bundleId) {
      return bundleId in bundleIdCache;
    };

    /**
     * Our own loadSameFile function
     * avoid the same file loaded multiple times
     * try to load the same file [bundleID] from different sources [bundlePaths]
     * start from the first path, if failed, try the next one
     * @param {string} bundleID - The bundle id
     * @param {string[]} bundlePaths - The file paths array of the same file
     */
    function loadSameFile(bundleID, bundlePaths) {
      // get the first path
      var path = bundlePaths.shift();

      // // start loading
      // loadjs(path, bundleID, {
      //   async: true,
      //   numRetries: 1,
      //   returnPromise: false,
      // });

      // // check if the file is loaded successfully, if not, try the next path
      // loadjs.ready(bundleID, {
      //   success: function () {
      //     console.log('[GOOD] ' + path + ' loaded');
      //   },
      //   error: function (depsNotFound) {
      //     console.log('[ERROR] ' + path + ' failed to load');
      //     delete bundleIdCache[bundleID];
      //     delete bundleResultCache[bundleID];
      //     delete bundleCallbackQueue[bundleID];
      //     if (bundlePaths.length) {
      //       loadSameFile(bundleID, bundlePaths);
      //     }
      //   },
      // });

      return loadjs(path, bundleID, { returnPromise: true })
        .then(function () {
          console.log('[GOOD] ' + path + ' loaded');
        })
        .catch(function (pathsNotFound) {
          console.log('[ERROR] ' + path + ' failed to load');
          delete bundleIdCache[bundleID];
          delete bundleResultCache[bundleID];
          delete bundleCallbackQueue[bundleID];
          if (bundlePaths.length) {
            return loadSameFile(bundleID, bundlePaths);
          }
        });
    }
  </script>

  <script>
    // loading CSS stylesheets and images
    const darklight_css = [
      "css!https://gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/style.min.css",
      "css!https://jupyter.gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/style.min.css",
      "css!//cdn.jsdelivr.net/npm/docsify-darklight-theme@latest/dist/style.min.css",
    ];
    const DOA_logo = [
      "img!https://gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/logo_DOA_mini.png",
      "img!https://jupyter.gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/logo_DOA_mini.png",
    ];
    loadSameFile('darklight_css', darklight_css);
    loadSameFile('DOA_logo', DOA_logo);
  </script>

  <style>
    nav.app-nav li ul {
      min-width: 100px;
    }

    #carbonads {
      box-shadow: none !important;
      width: auto !important;
    }
  </style>

</head>

<body>
  <div id="app">Loading (/≧▽≦)/... ...</div>

  <script>
    window.$docsify = {
      alias: {
        '/.*/_navbar.md': '/_navbar.md',
        '/.*/_sidebar.md': '/_sidebar.md',
      },
      auto2top: true,
      // basePath: '/docs/',
      // relativePath: true,
      coverpage: true,
      executeScript: true,
      loadSidebar: true,
      loadNavbar: true,
      mergeNavbar: true,
      maxLevel: 6,
      subMaxLevel: 6,
      notFoundPage: true,
      name: 'Gravity Documentation',
      repo: 'https://github.com/gravity-doc/gravity-doc.github.io/',
      logo: 'https://jupyter.gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/logo_DOA_mini.png',
      search: 'auto',
      search: {
        maxAge: 3600000,
        paths: 'auto',
        placeholder: 'Search / 搜索关键词',
        noData: 'No results / 无结果 ╥﹏╥...',
        depth: 6,
        hideOtherSidebarContent: false
      },
      // busuanzi: true,
      // count:{
      //     countable:true,
      //     fontsize:'0.9em',
      //     color:'rgb(90,90,90)',
      //     language:'english'
      // },
      copyCode: {
        buttonText: 'Copy to clipboard',
        errorText: 'Error',
        successText: 'Copied',
      },
      // 'flexible-alerts': {
      //   style: 'flat'
      // },
    }

  </script>

  <script>
    // loading JS files
    const JSdocsify = [
      // "https://baidu.com/docsify.js",
      "https://gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/docsify.js",
      "https://jupyter.gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/docsify.js",
      "//cdn.jsdelivr.net/npm/docsify@4/lib/docsify.js",
    ];
    const JSalerts = [
      "https://gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/docsify-plugin-flexible-alerts.min.js",
      "https://jupyter.gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/docsify-plugin-flexible-alerts.min.js",
      "//cdn.jsdelivr.net/npm/docsify-plugin-flexible-alerts@1/dist/docsify-plugin-flexible-alerts.min.js",
    ];
    const JSdarkTheme = [
      // "https://baidu.com/index.min.js",
      "https://gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/index.min.js",
      "https://jupyter.gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/index.min.js",
      "//cdn.jsdelivr.net/npm/docsify-darklight-theme@latest/dist/index.min.js",
    ];
    const JSsearch = [
      // "https://baidu.com/search.js",
      "https://gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/search.js",
      "https://jupyter.gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/search.js",
      "//cdn.jsdelivr.net/npm/docsify@4/lib/plugins/search.js",
    ];
    const JScopyCode = [
      // "https://baidu.com/docsify-copy-code.min.js",
      "https://gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/docsify-copy-code.min.js",
      "https://jupyter.gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/docsify-copy-code.min.js",
      "//cdn.jsdelivr.net/npm/docsify-copy-code@3.0.0/dist/docsify-copy-code.min.js",
    ];
    const JSzoomImage = [
      // "https://baidu.com/zoom-image.min.js",
      "https://gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/zoom-image.min.js",
      "https://jupyter.gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/zoom-image.min.js",
      "//cdn.jsdelivr.net/npm/docsify/lib/plugins/zoom-image.min.js",
    ];
    const JSpagination = [
      "https://gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/docsify-pagination.min.js",
      "https://jupyter.gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/docsify-pagination.min.js",
      "//cdn.jsdelivr.net/npm/docsify-pagination@2/dist/docsify-pagination.min.js",
    ];
    const JSbash = [
      // "https://baidu.com/prism-bash.min.js",
      "https://gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/prism-bash.min.js",
      "https://jupyter.gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/prism-bash.min.js",
      "//cdn.jsdelivr.net/npm/prismjs@1/components/prism-bash.min.js",
    ];
    const JSmarkdown = [
      "https://gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/prism-markdown.min.js",
      "https://jupyter.gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/prism-markdown.min.js",
      "//cdn.jsdelivr.net/npm/prismjs@1/components/prism-markdown.min.js",
    ];
    const JSjson = [
      "https://gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/prism-json.min.js",
      "https://jupyter.gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/prism-json.min.js",
      "//cdn.jsdelivr.net/npm/prismjs@1/components/prism-json.min.js",
    ];
    const JSpython = [
      "https://gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/prism-python.min.js",
      "https://jupyter.gravity.sjtu.edu.cn/file/api/public/dl/bjEJwMgn/JS_cache/prism-python.min.js",
      "//cdn.jsdelivr.net/npm/prismjs@1/components/prism-python.min.js",
    ];

    Promise.allSettled(
      [
        loadSameFile('JSdarkTheme', JSdarkTheme),
        loadSameFile('JSalerts', JSalerts),
        loadSameFile('JScopyCode', JScopyCode),
        loadSameFile('JSzoomImage', JSzoomImage),
        loadSameFile('JSpagination', JSpagination),
      ])
      .then(function () {
        return Promise.allSettled(
          [
            loadSameFile('JSdocsify', JSdocsify),
            loadSameFile('JSsearch', JSsearch),
          ]
        );
      })
      .then(function () {
        return Promise.allSettled(
          [
            loadSameFile('JSbash', JSbash),
            loadSameFile('JSmarkdown', JSmarkdown),
            loadSameFile('JSjson', JSjson),
            loadSameFile('JSpython', JSpython),
          ]
        );
      })
      .catch(function (error) {
        console.error('One or more files failed to load:', error);
      });

  </script>

</body>

</html>